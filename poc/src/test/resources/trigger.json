{
  "processEditing": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn2:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:bpmn2=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:brandnewdata=\"https://www.brandnewdata.com/schema/1.0\" xmlns:zeebe=\"http://camunda.org/schema/zeebe/1.0\" id=\"sample-diagram\" targetNamespace=\"http://bpmn.io/schema/bpmn\" xsi:schemaLocation=\"http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd\">\n  <bpmn2:process id=\"Process_742e4c8c-a880-4bfc-b4a4-1748018fbaeb\" name=\"提交问卷回调\" isExecutable=\"false\">\n    <bpmn2:startEvent id=\"StartEvent_1\" name=\"HttpListener&#10;http触发器\" brandnewdata:modelerIcon=\"https://baida-private.oss-cn-hangzhou.aliyuncs.com/1657006590055http通用连接器.svg\" brandnewdata:modelerGroup=\"com.brandnewdata\" brandnewdata:modelerUid=\"http-listener\" brandnewdata:modelerId=\"1544223454033076225\" brandnewdata:modelerType=\"3\">\n      <bpmn2:extensionElements>\n        <brandnewdata:taskDefinition type=\"com.brandnewdata:http-listener.httpListener:1.0.0\" />\n        <brandnewdata:requestMapping label=\"监听配置\">\n          <brandnewdata:request type=\"string\" name=\"listenPath\" label=\"监听路径\" value=\"listen_path\" />\n        </brandnewdata:requestMapping>\n        <brandnewdata:requestMapping label=\"监听配置\">\n          <brandnewdata:request type=\"string\" name=\"listenPath\" label=\"监听路径\" value=\"\" />\n        </brandnewdata:requestMapping>\n      </bpmn2:extensionElements>\n      <bpmn2:outgoing>Flow_06snng3</bpmn2:outgoing>\n    </bpmn2:startEvent>\n    <bpmn2:sequenceFlow id=\"Flow_06snng3\" sourceRef=\"StartEvent_1\" targetRef=\"Activity_03ge6gc\" />\n    <bpmn2:scriptTask id=\"Activity_03ge6gc\" name=\"校验签名\">\n      <bpmn2:extensionElements>\n        <zeebe:ioMapping>\n          <zeebe:input source=\"= request.body\" target=\"body\" />\n        </zeebe:ioMapping>\n        <zeebe:taskHeaders>\n          <zeebe:header key=\"language\" value=\"groovy\" />\n          <zeebe:header key=\"script\" value=\"import groovy.json.JsonSlurper;  //def body = &#34;{\\&#34;activity\\&#34;:\\&#34;174708404\\&#34;,\\&#34;name\\&#34;:\\&#34;来金防疫情况收集：健康码、行程卡、核酸报告、金华防疫码\\&#34;,\\&#34;ipaddress\\&#34;:\\&#34;60.186.81.144\\&#34;,\\&#34;q1\\&#34;:\\&#34;wqeqw\\&#34;,\\&#34;q2\\&#34;:\\&#34;dsad\\&#34;,\\&#34;q3\\&#34;:\\&#34;wqewqe\\&#34;,\\&#34;q4\\&#34;:\\&#34;上海-上海市-徐汇区\\&#34;,\\&#34;q5_1_1\\&#34;:\\&#34;eqwe\\&#34;,\\&#34;q5_1_2\\&#34;:\\&#34;dsada\\&#34;,\\&#34;q5_1_3\\&#34;:\\&#34;wewqe\\&#34;,\\&#34;q6\\&#34;:\\&#34;\\&#34;,\\&#34;q7\\&#34;:\\&#34;\\&#34;,\\&#34;q8\\&#34;:\\&#34;\\&#34;,\\&#34;q9\\&#34;:\\&#34;\\&#34;,\\&#34;province\\&#34;:\\&#34;浙江\\&#34;,\\&#34;city\\&#34;:\\&#34;杭州\\&#34;,\\&#34;index\\&#34;:\\&#34;9\\&#34;,\\&#34;joinid\\&#34;:\\&#34;113684101251\\&#34;,\\&#34;timetaken\\&#34;:\\&#34;10703\\&#34;,\\&#34;submittime\\&#34;:\\&#34;2022-07-18 14:04:00\\&#34;,\\&#34;sign\\&#34;:\\&#34;b3795e56c79ea43aab612b675510f963217fcf77\\&#34;}&#34;; /*def access_key = &#34;d25749c8-65f8-4cbe-bcac-6d03dd219786&#34;;*/  def body = job.getVariablesAsMap().get(&#34;body&#34;); def access_key = job.getVariablesAsMap().get(&#34;access_key&#34;);  def json = new JsonSlurper(); def root = json.parseText(body);  def activity = root[&#34;activity&#34;]; def index = root[&#34;index&#34;]; def sign = root[&#34;sign&#34;];  def var = activity+index+access_key; if(var.digest(&#39;SHA-1&#39;) != sign) {     throw new RuntimeException(&#39;sign is not correct&#39;); };\" />\n        </zeebe:taskHeaders>\n        <zeebe:taskDefinition type=\"script\" />\n      </bpmn2:extensionElements>\n      <bpmn2:incoming>Flow_06snng3</bpmn2:incoming>\n      <bpmn2:outgoing>Flow_1hfv3es</bpmn2:outgoing>\n    </bpmn2:scriptTask>\n    <bpmn2:endEvent id=\"Event_1isxobq\">\n      <bpmn2:incoming>Flow_1hfv3es</bpmn2:incoming>\n    </bpmn2:endEvent>\n    <bpmn2:sequenceFlow id=\"Flow_1hfv3es\" sourceRef=\"Activity_03ge6gc\" targetRef=\"Event_1isxobq\" />\n  </bpmn2:process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_742e4c8c-a880-4bfc-b4a4-1748018fbaeb\">\n      <bpmndi:BPMNEdge id=\"Flow_1hfv3es_di\" bpmnElement=\"Flow_1hfv3es\">\n        <di:waypoint x=\"550\" y=\"230\" />\n        <di:waypoint x=\"602\" y=\"230\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_06snng3_di\" bpmnElement=\"Flow_06snng3\">\n        <di:waypoint x=\"398\" y=\"230\" />\n        <di:waypoint x=\"450\" y=\"230\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\">\n        <dc:Bounds x=\"362\" y=\"212\" width=\"36\" height=\"36\" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x=\"350\" y=\"255\" width=\"60\" height=\"27\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Activity_0meosym_di\" bpmnElement=\"Activity_03ge6gc\">\n        <dc:Bounds x=\"450\" y=\"190\" width=\"100\" height=\"80\" />\n        <bpmndi:BPMNLabel />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Event_1isxobq_di\" bpmnElement=\"Event_1isxobq\">\n        <dc:Bounds x=\"602\" y=\"212\" width=\"36\" height=\"36\" />\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn2:definitions>\n",
  "inParamConfigs": [{
    "paramName": "access_key",
    "paramShowName": "密钥",
    "paramType": "string"
  }, {
    "paramName": "listen_path",
    "paramShowName": "监听路径",
    "paramType": "string"
  }],
  "triggerShowName": "提交问卷回调",
  "triggerName": "commit-callback",
  "triggerShowGroup": "默认",
  "requestParamConfigs": [{
    "paramName": "type",
    "paramShowName": "定时类型",
    "paramType": "string"
  }, {
    "paramName": "content",
    "paramShowName": "配置内容",
    "paramType": "string"
  }]
}